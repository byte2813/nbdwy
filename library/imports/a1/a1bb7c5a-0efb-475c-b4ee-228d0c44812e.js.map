{"version":3,"sources":["assets\\Script\\pageMgr.js"],"names":["AC","require","cc","Class","Component","properties","status","pages","Node","start","lateStart","width","director","getWinSizeInPixels","window","height","adoptCanvas","canvas","getScene","getChildByName","getComponent","Canvas","rateR","designResolution","rateV","fitHeight","fitWidth","onOpenPage","num","callFun","closeAllPages","active","addPage","scale","runAction","popOut","openPageTarget","target","removePage","sequence","popIn","callFunc","onButtonOpenPage","event","cust","onButtonAddPage","onButtonRemovePage","forEach","element"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\n * @author uu\n * @file  通用页面控制器和适配\n */\nvar AC = require('action')\ncc.Class({\n\textends: cc.Component,\n\tproperties: {\n\t\tstatus: 0, //页面状态\n\t\tpages: [cc.Node],\n\t},\n\t// 0 开始游戏页面\n\t// 1 游戏页面\n\t// 2 UI页面\n\t// 3 过关页面\n\t// 4 失败页面\n\t// 5 复活页面\n\t// 6 排行榜页面\n\n\tstart() {\n\t\tthis.lateStart()\n\t},\n\tlateStart() {\n\t\tthis.width = cc.director.getWinSizeInPixels().width\n\t\twindow.width = this.width\n\t\tthis.height = cc.director.getWinSizeInPixels().height\n\t\twindow.height = this.height\n\t\t// 存为全局变量\n\t\tthis.adoptCanvas()\n\t},\n\t// 适配解决方案\n\tadoptCanvas() {\n\t\tlet canvas = cc.director.getScene().getChildByName('Canvas').getComponent(cc.Canvas)\n\t\t// 设计分辨率比\n\t\tlet rateR = canvas.designResolution.height / canvas.designResolution.width;\n\t\t// 显示分辨率比\n\t\tlet rateV = this.height / this.width;\n\t\tif (rateV > rateR) {\n\t\t\tcanvas.fitHeight = false;\n\t\t\tcanvas.fitWidth = true;\n\t\t} else {\n\t\t\tcanvas.fitHeight = true;\n\t\t\tcanvas.fitWidth = false;\n\t\t}\n\t},\n\n\tonOpenPage(num, callFun) {\n\t\tthis.closeAllPages()\n\t\tthis.pages[num].active = true\n\t\t// if (callFun) {\n\t\t//   this.callFun();\n\t\t// }\n\t},\n\taddPage(num, callFun) {\n\t\tthis.pages[num].scale = 0.5\n\t\tthis.pages[num].active = true\n\t\tthis.pages[num].runAction(AC.popOut(0.5))\n\t\t// if (callFun) {\n\t\t//   this.callFun();\n\t\t// }\n\t},\n\topenPageTarget(target) {\n\t\ttarget.scale = 0.5\n\t\ttarget.active = true\n\t\ttarget.runAction(AC.popOut(0.5))\n\t},\n\tremovePage(num, callFun) {\n\t\tthis.pages[num].runAction(cc.sequence(AC.popIn(0.5), cc.callFunc(() => {\n\t\t\tthis.pages[num].active = false\n\t\t}, this)))\n\t\t// if (callFun) {\n\t\t//   this.callFun();\n\t\t// }\n\t},\n\tonButtonOpenPage(event, cust) {\n\t\tthis.onOpenPage(cust);\n\t},\n\tonButtonAddPage(event, cust) {\n\t\tthis.addPage(cust);\n\t},\n\tonButtonRemovePage(event, cust) {\n\t\tthis.removePage(cust);\n\t},\n\tcloseAllPages() {\n\t\tthis.pages.forEach(element => {\n\t\t\telement.active = false\n\t\t});\n\t},\n});"]}