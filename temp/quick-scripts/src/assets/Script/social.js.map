{"version":3,"sources":["assets\\Script\\social.js"],"names":["cc","Class","Component","properties","display","Sprite","groupDisplay","_isShow","isSharing","init","c","self","_controller","sys","platform","WECHAT_GAME","wx","showShareMenu","withShareTicket","onShareAppMessage","title","imageUrl","onAudioInterruptionEnd","musicMgr","pauseBg","resumeBg","onShow","options","scene","postMessage","message","shareTicket","openGroupRank","node","active","totalRank","director","resume","onHide","pause","getHighestLevel","onItemShareSuccess","hasShared","game","fakeShareSuccess","highLevel","getStorageSync","getHighestScore","score","onShareButton","shareAppMessage","scoreMgr","levelData","level","name","onUsualShareButton","onItemShareButton","onShakePhone","vibrateShort","onGameOver","highScore","parseInt","highLevelName","gameData","json","setStorageSync","failHighScore","string","kvDataList","Array","push","key","value","setUserCloudStorage","success","fail","res","showRank","closeRank","showGroupRank","closeGroupRank","createImage","sprite","url","image","onload","texture","Texture2D","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","src","update","getComponent","WXSubContextView","onReviveButton","type","adType","audioAd","show","load","then","err","console","log","errMsg","onSkipRevive","onLevelUpButton","createRewardedVideoAd","adUnitId","fakeShare","onError","onClose","isEnded","undefined","showReviveSuccess","askRevive","BYTEDANCE_GAME","_createVedioAd","callback","videoAd","showModal","content","showCancel","offClose","msg","showToast","tt","openBannerAdv","navToMiniprogram","event","custom","navigateToMiniProgram","appId","closeBannerAdv","bannerAd","hide"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\n * @author uu\n * @file  排行榜组件\n * @description 用户点击查看排行榜才检查授权,如果此时用户没有授权则进入授权界面\n */\ncc.Class({\n\textends: cc.Component,\n\tproperties: {\n\t\tdisplay: cc.Sprite,\n\t\tgroupDisplay: cc.Sprite,\n\t\t_isShow: false,\n\t\t// score: 0\n\t},\n\tisSharing: false,\n\tinit(c) {\n\t\tlet self = this\n\t\tthis._controller = c\n\t\tif (cc.sys.platform === cc.sys.WECHAT_GAME){\n\t\t\twx.showShareMenu({\n\t\t\t\twithShareTicket: true\n\t\t\t})\n\t\t\twx.onShareAppMessage(function () {\n\t\t\t\treturn {\n\t\t\t\t\ttitle: \"开局只是个农民，现在已经做到宰相\",\n\t\t\t\t\t// imageUrlId: 'oxEwGvClT0uldQ470pM84w',\n\t\t\t\t\timageUrl: 'https://mmocgame.qpic.cn/wechatgame/LtJZOjH6Z9ibiaMlpqzldsOf46Q7TZiaysI1fwc4Oj1L3CkbCaJMAMoicibbHu2HUQkOib/0'\n\t\t\t\t}\n\t\t\t})\n\t\t\t// this.display.node.width = window.width\n\t\t\t//this.display.node.height = window.height\n\t\t\t//this.display.node.getComponent(cc.WXSubContextView).enabled = false;\n\t\t\t//   this.tex = new cc.Texture2D();\n\t\t\t//TODO: 微信小游戏导致音乐自动关闭 处理失败\n\t\t\t// 监听\n\t\t\twx.onAudioInterruptionEnd(() => {\n\t\t\t\tc.musicMgr.pauseBg()\n\t\t\t\tc.musicMgr.resumeBg()\n\t\t\t})\n\t\t\twx.onShow((options) => {\n\t\t\t\t// console.log(options)\n\t\t\t\tif (options.scene == 1044) {\n\t\t\t\t\twx.postMessage({\n\t\t\t\t\t\tmessage: 'group',\n\t\t\t\t\t\tshareTicket: options.shareTicket\n\t\t\t\t\t})\n\t\t\t\t\tc.openGroupRank()\n\t\t\t\t\tthis.display.node.active = false\n\t\t\t\t\tc.totalRank.active = false\n\t\t\t\t}\n\t\t\t\tcc.director.resume()\n\t\t\t\t// if (!self.hasShared && self.isSharing && self._controller.game._status == 1) {\n\t\t\t\t// \t// TODO 分享成功\n\t\t\t\t// \tself.onItemShareSuccess()\n\t\t\t\t// }\n\t\t\t})\n\t\t\twx.onHide(() => {\n\t\t\t\tcc.director.pause()\n\t\t\t})\n\n\t\t\t// 获取最高官阶\n\t\t\tthis.getHighestLevel()\n\t\t}\n\n\t},\n\tonItemShareSuccess() {\n\t\tthis.hasShared = true\n\t\tthis._controller.game.fakeShareSuccess()\n\t},\n\tgetHighestLevel() {\n\t\tlet highLevel = wx.getStorageSync('highLevel')\n\t\treturn highLevel\n\t},\n\tgetHighestScore() {\n\t\tlet score = wx.getStorageSync('highScore')\n\t\treturn score\n\t},\n\t// --------------- share ----------------\n\tonShareButton() {\n\t\tvar self = this;\n\t\twx.shareAppMessage({\n\t\t\ttitle: \"我终于当上了\" + this._controller.scoreMgr.levelData[this._controller.scoreMgr.level - 1].name + \",不服来战\",\n\t\t\t// imageUrlId: 'oxEwGvClT0uldQ470pM84w',\n\t\t\timageUrl: 'https://mmocgame.qpic.cn/wechatgame/LtJZOjH6Z9ibiaMlpqzldsOf46Q7TZiaysI1fwc4Oj1L3CkbCaJMAMoicibbHu2HUQkOib/0'\n\t\t})\n\t},\n\tonUsualShareButton() {\n\t\twx.shareAppMessage({\n\t\t\ttitle: \"开局只是个农民，现在已经做到宰相\",\n\t\t\t// imageUrlId: 'oxEwGvClT0uldQ470pM84w',\n\t\t\timageUrl: 'https://mmocgame.qpic.cn/wechatgame/LtJZOjH6Z9ibiaMlpqzldsOf46Q7TZiaysI1fwc4Oj1L3CkbCaJMAMoicibbHu2HUQkOib/0'\n\t\t})\n\t},\n\tonItemShareButton() {\n\t\tif (!this.hasShared) {\n\t\t\tthis.isSharing = true\n\t\t} else {\n\t\t\t// 提示玩家 当前局已分享\n\t\t\treturn\n\t\t}\n\t\twx.shareAppMessage({\n\t\t\ttitle: \"开局只是个农民，现在已经做到宰相\",\n\t\t\t// imageUrlId: 'oxEwGvClT0uldQ470pM84w',\n\t\t\timageUrl: 'https://mmocgame.qpic.cn/wechatgame/LtJZOjH6Z9ibiaMlpqzldsOf46Q7TZiaysI1fwc4Oj1L3CkbCaJMAMoicibbHu2HUQkOib/0'\n\t\t})\n\t},\n\tonShakePhone() {\n\t\twx.vibrateShort()\n\t},\n\t// ---------------分数上传---------------\n\tonGameOver(level, score) {\n\t\t//上传分数\n\t\t//打开开放域\n\t\tthis.score = score\n\t\tlet highLevel = level\n\t\tlet highScore = score\n\t\tlet self = this\n\t\thighLevel = wx.getStorageSync('highLevel')\n\t\thighLevel = parseInt(highLevel)\n\t\tif (highLevel) {\n\t\t\thighLevel = highLevel < level ? level : highLevel\n\t\t} else {\n\t\t\thighLevel = level\n\t\t}\n\t\thighScore = wx.getStorageSync('highScore')\n\t\tif (highScore) {\n\t\t\thighScore = parseInt(highScore)\n\t\t\thighScore = highScore < score ? score : highScore\n\t\t} else {\n\t\t\thighScore = score\n\t\t}\n\t\tvar highLevelName = this._controller.gameData.json.levelData[highLevel - 1].name\n\t\twx.setStorageSync('highLevel', highLevel + '')\n\t\twx.setStorageSync('highScore', highScore + '')\n\t\tself._controller.scoreMgr.failHighScore.string = \"您的最高分:\" + (highScore + '')\n\t\tvar kvDataList = new Array()\n\t\tkvDataList.push({\n\t\t\tkey: \"highLevel\",\n\t\t\tvalue: highLevelName,\n\t\t}, {\n\t\t\tkey: \"highScore\",\n\t\t\tvalue: highScore + '',\n\t\t})\n\t\twx.setUserCloudStorage({\n\t\t\t\"KVDataList\": kvDataList,\n\t\t\tsuccess: () => {\n\t\t\t\t//  self.showRank()\n\t\t\t},\n\t\t\tfail: (res) => {\n\t\t\t\t//   console.log(res)\n\t\t\t}\n\t\t})\n\t},\n\tshowRank() {\n\t\twx.postMessage({\n\t\t\tmessage: 'Show'\n\t\t})\n\t\tthis.display.node.active = true\n\t\tthis._isShow = true\n\t},\n\t// switchRankType() {\n\t//   wx.postMessage({\n\t//     message: 'switchRank'\n\t//   })\n\t//   this._isShow = true\n\t// },\n\tcloseRank() {\n\t\tthis.display.node.active = false\n\t\twx.postMessage({\n\t\t\tmessage: 'Hide'\n\t\t})\n\t\tthis._isShow = false\n\t},\n\tshowGroupRank() {\n\t\twx.postMessage({\n\t\t\tmessage: 'Show'\n\t\t})\n\t\tthis.groupDisplay.node.active = true\n\t\tthis._isShow = true\n\t},\n\t// switchRankType() {\n\t//   wx.postMessage({\n\t//     message: 'switchRank'\n\t//   })\n\t//   this._isShow = true\n\t// },\n\tcloseGroupRank() {\n\t\tthis.groupDisplay.node.active = false\n\t\twx.postMessage({\n\t\t\tmessage: 'Hide'\n\t\t})\n\t\tthis._isShow = false\n\t},\n\tcreateImage(sprite, url) {\n\t\tlet image = wx.createImage();\n\t\timage.onload = function () {\n\t\t\tlet texture = new cc.Texture2D();\n\t\t\ttexture.initWithElement(image);\n\t\t\ttexture.handleLoadedTexture();\n\t\t\tsprite.spriteFrame = new cc.SpriteFrame(texture);\n\t\t};\n\t\timage.src = url;\n\t},\n\tupdate() {\n\t\tif (this._isShow) {\n\t\t\tif (this.display.node.active) {\n\t\t\t\tthis.display.node.getComponent(cc.WXSubContextView).update()\n\t\t\t}\n\t\t\tif (this.groupDisplay.node.active) {\n\t\t\t\tthis.groupDisplay.node.getComponent(cc.WXSubContextView).update()\n\t\t\t}\n\t\t}\n\t},\n\t// 控制打开广告\n\tonReviveButton(type) {\n\t\t// 广告位\n\t\tlet self = this\n\t\tthis.adType = type //0表示加倍 1表示复活 2表示炸弹\n\t\tif (cc.sys.platform === cc.sys.WECHAT_GAME){\n\t\t\tif (this.audioAd) {\n\t\t\t\tthis.audioAd.show().catch(() => {\n\t\t\t\t\t// 失败重试\n\t\t\t\t\tthis.audioAd.load()\n\t\t\t\t\t\t.then(() => this.audioAd.show())\n\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\tconsole.log('激励视频 广告显示失败', err.errMsg)\n\t\t\t\t\t\t\tif (self.adType == 1) {\n\t\t\t\t\t\t\t\tself._controller.game.onSkipRevive()\n\t\t\t\t\t\t\t} else if (self.adType == 2) {\n\t\t\t\t\t\t\t\tself._controller.scoreMgr.onLevelUpButton()\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tself.onItemShareSuccess()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.audioAd = wx.createRewardedVideoAd({\n\t\t\t\tadUnitId: '2300011781_01'\n\t\t\t})\n\t\t\tthis.audioAd.show().catch(() => {\n\t\t\t\t// 失败重试\n\t\t\t\tthis.audioAd.load()\n\t\t\t\t\t.then(() => this.audioAd.show())\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tself.fakeShare()\n\t\t\t\t\t})\n\t\t\t})\n\t\t\tthis.audioAd.onError(err => {\n\t\t\t\tself.fakeShare()\n\t\t\t})\n\t\t\tthis.audioAd.onClose((res) => {\n\t\t\t\tif (self.adType == 1) {\n\t\t\t\t\tif (res && res.isEnded || res === undefined) {\n\t\t\t\t\t\tself._controller.game.showReviveSuccess()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself._controller.game.askRevive()\n\t\t\t\t\t}\n\t\t\t\t} else if (self.adType == 0) {\n\t\t\t\t\tif (res && res.isEnded || res === undefined) {\n\t\t\t\t\t\tself._controller.scoreMgr.onLevelUpButton(2)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (res && res.isEnded || res === undefined) {\n\t\t\t\t\t\tself.onItemShareSuccess()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}else if (cc.sys.platform === cc.sys.BYTEDANCE_GAME){\n\t\t\tthis._createVedioAd(function (res){\n\t\t\t\tif (self.adType == 1) {\n\t\t\t\t\tif (res && res.isEnded || res === undefined) {\n\t\t\t\t\t\tself._controller.game.showReviveSuccess()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself._controller.game.askRevive()\n\t\t\t\t\t}\n\t\t\t\t} else if (self.adType == 0) {\n\t\t\t\t\tif (res && res.isEnded || res === undefined) {\n\t\t\t\t\t\tself._controller.scoreMgr.onLevelUpButton(2)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (res && res.isEnded || res === undefined) {\n\t\t\t\t\t\tself.onItemShareSuccess()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\n\t},\n\n\t_createVedioAd  (callback){\n\t\tif (cc.sys.platform === cc.sys.WECHAT_GAME){\n\t\t\tlet videoAd = wx.createRewardedVideoAd({\n\t\t\t\tadUnitId: 'adunit-7a9758fd45a5f9ce'\n\t\t\t});\n\t\t\tvideoAd.load()\n\t\t\t\t.then(() => videoAd.show())\n\t\t\t\t.catch(function (err) {\n\t\t\t\t\tconsole.log(\"视频加载失败\", err);\n\t\t\t\t\twx.showModal({\n\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\tcontent: '视频加载失败',\n\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\tvideoAd.onClose(function (res) {\n\t\t\t\tif (!videoAd) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (res.isEnded) {\n\t\t\t\t\tcallback(res);\n\t\t\t\t\tvideoAd.offClose();\n\t\t\t\t} else {\n\t\t\t\t\tvideoAd.offClose();\n\t\t\t\t}\n\t\t\t});\n\t\t\tvideoAd.onError(function (msg) {\n\t\t\t\twx.showToast({\n\t\t\t\t\ttitle: '错误'\n\t\t\t\t});\n\t\t\t\tconsole.log(msg);\n\t\t\t});\n\t\t}else if (cc.sys.platform === cc.sys.BYTEDANCE_GAME){\n\t\t\tlet videoAd = tt.createRewardedVideoAd({\n\t\t\t\tadUnitId: '44l22nib948p0c5v63'\n\t\t\t});\n\t\t\tvideoAd.load()\n\t\t\t\t.then(() => videoAd.show())\n\t\t\t\t.catch(function (err) {\n\t\t\t\t\tconsole.log(\"视频加载失败\",err);\n\t\t\t\t\ttt.showModal({\n\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\tcontent: '视频加载失败',\n\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\tvideoAd.onClose(function (res) {\n\t\t\t\tif(!videoAd){\n\t\t\t\t\treturn ;\n\t\t\t\t}\n\t\t\t\tif(res.isEnded){\n\t\t\t\t\tcallback(res);\n\t\t\t\t\tvideoAd.offClose();\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log(\"未播放完关闭\")\n\t\t\t\t\tvideoAd.offClose();\n\t\t\t\t}\n\t\t\t});\n\t\t\tvideoAd.onError(function(msg){\n\t\t\t\ttt.showToast({\n\t\t\t\t\ttitle: '错误'\n\t\t\t\t});\n\t\t\t\tconsole.log(msg);\n\t\t\t});\n\t\t}\n\n\t},\n\n\tfakeShare() {\n\t\tlet self = this\n\t\twx.shareAppMessage({\n\t\t\ttitle: \"我已经玩到\" + this._controller.scoreMgr.score + \"分了，邀请你来挑战\",\n\t\t\t// imageUrlId: 'oxEwGvClT0uldQ470pM84w',\n\t\t\timageUrl: 'https://mmocgame.qpic.cn/wechatgame/LtJZOjH6Z9ibiaMlpqzldsOf46Q7TZiaysI1fwc4Oj1L3CkbCaJMAMoicibbHu2HUQkOib/0'\n\t\t})\n\t\tif (this.adType) {\n\t\t\tself._controller.game.showReviveSuccess()\n\t\t} else {\n\t\t\tself._controller.scoreMgr.onLevelUpButton(2)\n\t\t}\n\t},\n\topenBannerAdv() {\n\t\t// 创建 Banner 广告实例，提前初始化\n\t\t// let screenWidth = wx.getSystemInfoSync().screenWidth\n\t\t// let bannerHeight = screenWidth / 350 * 120\n\t\t// let screenHeight = wx.getSystemInfoSync().screenHeight - 108\n\t\t// let adUnitIds = [\n\t\t//   'adunit-510a4ec39065ef96',\n\t\t//   'adunit-29b0fa7a2db8e8cb',\n\t\t//   'adunit-4020bb9ea439e6a5'\n\t\t// ]\n\t\t// if (this.bannerAd) {\n\t\t//   this.bannerAd.destroy()\n\t\t// }\n\t\t// this.bannerAd = wx.createBannerAd({\n\t\t//   adUnitId: adUnitIds[Math.floor(Math.random() * 3)],\n\t\t//   style: {\n\t\t//     left: 0,\n\t\t//     top: screenHeight,\n\t\t//     width: 620,\n\t\t//   }\n\t\t// })\n\t\t// // 在适合的场景显示 Banner 广告\n\t\t// this.bannerAd.onLoad(() => {\n\t\t//   // console.log('banner 广告加载成功')\n\t\t// })\n\t\t// this.bannerAd.onError((e) => {\n\t\t//   console.log('banner 广告加载失败', e)\n\t\t// })\n\t\t// this.bannerAd.show()\n\t\t//   .then()\n\t},\n\tnavToMiniprogram(event, custom) {\n\t\tconsole.log(custom)\n\t\twx.navigateToMiniProgram({\n\t\t\tappId: custom\n\t\t})\n\t},\n\tcloseBannerAdv() {\n\t\tif (this.bannerAd) {\n\t\t\tthis.bannerAd.hide()\n\t\t}\n\t}\n});"]}