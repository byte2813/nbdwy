{"version":3,"sources":["assets\\Script\\controller.js"],"names":["cc","Class","Component","properties","musicMgr","require","game","pageMgr","social","config","JsonAsset","gameData","scoreMgr","totalRank","Node","groupRank","startPage","navNode","pictorial","helpPage","cbl","start","active","init","sys","platform","WECHAT_GAME","BYTEDANCE_GAME","lateStart","node","closeBannerAdv","_status","getComponent","bannerNode","scale","onOpenPage","onGameStartButton","openBannerAdv","showAnimation","then","gameStart","closeRank","openRank","showRank","openGroupRank","showGroupRank","addPage","closeGroupRank","removePage","openPictorial","closePictorial","openCbl","closeCbl","openHelpPage","closeHelpPage"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\n * @author uu\n * @file 主控制器\n */\n\ncc.Class({\n  extends: cc.Component,\n  properties: {\n    musicMgr: require('musicMgr'), //音乐控制组件\n    game: require('game'), //主游戏控制器\n    pageMgr: require('pageMgr'), //页面控制器\n    social: require('social'), //排行榜、广告控制器\n    config: cc.JsonAsset,\n    gameData: cc.JsonAsset,\n    scoreMgr: require('score'), //分数 特效控制\n    totalRank: cc.Node,\n    groupRank: cc.Node,\n    startPage: require('startPage'),\n    navNode: cc.Node,\n    pictorial: cc.Node,\n    helpPage: cc.Node,\n    cbl: cc.Node,\n  },\n  start() {\n    this.totalRank.active = false\n    this.pictorial.active = false\n    this.cbl.active = false\n    this.game.init(this)\n    if (cc.sys.platform === cc.sys.WECHAT_GAME || cc.sys.platform === cc.sys.BYTEDANCE_GAME) {\n      this.social.init(this)\n    }\n    this.musicMgr.init()\n    this.lateStart()\n  },\n  lateStart() {\n    if (this.social.node.active) {\n      this.social.closeBannerAdv()\n\t\t}\n\t\tthis.game._status=0\n    this.pictorial.getComponent('pictorial').init(this)\n    this.startPage.bannerNode.scale = 1\n    this.pageMgr.onOpenPage(0)\n  },\n  onGameStartButton() {\n    // TODO:  增加一个动画\n    if (this.social.node.active) {\n      this.social.openBannerAdv()\n    }\n    this.startPage.showAnimation().then(() => {\n      this.gameStart()\n    })\n  },\n  gameStart() {\n    this.pageMgr.onOpenPage(1)\n    this.game.gameStart()\n  },\n  closeRank() {\n    this.totalRank.active = false\n    this.navNode.active = true\n    if (this.social.node.active) {\n      this.social.closeRank()\n    }\n  },\n  openRank() {\n    this.totalRank.active = true\n    this.navNode.active = false\n    if (this.social.node.active) {\n      this.social.showRank()\n    }\n  },\n  openGroupRank() {\n    this.groupRank.active = true\n    if (this.social.node.active) {\n      this.social.showGroupRank()\n      this.pageMgr.addPage(6)\n    }\n  },\n  closeGroupRank() {\n    this.groupRank.active = false\n    this.navNode.active = true\n    if (this.social.node.active) {\n      this.social.closeGroupRank()\n      this.pageMgr.removePage(6)\n    }\n  },\n  openPictorial() {\n    this.pictorial.active = true\n  },\n  closePictorial() {\n    this.pictorial.active = false\n  },\n  openCbl(){\n    this.cbl.active = true\n  },\n  closeCbl(){\n    this.cbl.active = false\n  },\n  openHelpPage() {\n\t\tthis.pageMgr.addPage(2)\n    this.helpPage.active = true\n  },\n  closeHelpPage() {\n\t\tthis.pageMgr.removePage(2)\n    this.helpPage.active = false\n  }\n});"]}