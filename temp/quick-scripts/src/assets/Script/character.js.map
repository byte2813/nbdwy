{"version":3,"sources":["assets\\Script\\character.js"],"names":["cc","Class","Component","properties","levelUp1","Node","levelUp2","character","fail","dbArray","dragonBones","DragonBonesAsset","textureArr","DragonBonesAtlasAsset","start","loadRes","self","i","nameSke","nameTex","loader","err","assert","texture","onWalk","target","playAnimation","onLevelUp","onSuccessDialog","level","showCharacter","onLevelUpBtn","onFail","initStartPage","jump","getComponent","ArmatureDisplay","destroy","main","addComponent","dragonAsset","dragonAtlasAsset","armatureName","timeScale"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n  extends: cc.Component,\n\n  properties: {\n    levelUp1: cc.Node,\n    levelUp2: cc.Node,\n    character: cc.Node,\n    fail: cc.Node,\n    dbArray: [dragonBones.DragonBonesAsset],\n    textureArr: [dragonBones.DragonBonesAtlasAsset]\n  },\n  start() {\n    this.loadRes()\n  },\n  loadRes() {\n    var self = this\n    for (let i = 0; i < 15; i++) {\n      let nameSke = \"db/sanxiao\" + (i + 1 + '') + \"_ske\"\n      let nameTex = \"db/sanxiao\" + (i + 1 + '') + \"_tex\"\n      cc.loader.loadRes(nameSke, dragonBones.DragonBonesAsset, (err, assert) => {\n        this.dbArray[i] = assert\n      })\n      cc.loader.loadRes(nameTex, dragonBones.DragonBonesAtlasAsset, (err, texture) => {\n        this.textureArr[i] = texture\n      })\n    }\n     //console.log('数据加载完毕')\n  },\n  onWalk(target) {\n    target.playAnimation('walk', -1)\n  },\n  onLevelUp() {\n    //this.levelUp2.getComponent(dragonBones.ArmatureDisplay).playAnimation('jump', -1)\n  },\n  onSuccessDialog(level) {\n    // this.showCharacter(level - 1, this.levelUp1)\n    this.showCharacter(level, this.levelUp2, true)\n\n  },\n  onLevelUpBtn(level) {\n    this.showCharacter(level)\n  },\n  onFail(level) {\n    this.showCharacter(level, this.fail)\n  },\n\n  initStartPage() {\n\n  },\n\n  showCharacter(level, target, jump) {\n    target = target || this.character\n    let assert = target.getComponent(dragonBones.ArmatureDisplay)\n    //  cc.log(\"before\", assert)\n    assert.destroy()\n  //  console.log(level)\n    let main = target.addComponent(dragonBones.ArmatureDisplay)\n    main.dragonAsset = this.dbArray[level - 1]\n    main.dragonAtlasAsset = this.textureArr[level - 1]\n    main.armatureName = \"Armature\"\n    main.timeScale = 0.5\n    // console.log(\"after\", main)\n    main.playAnimation(jump ? \"jump\" : \"walk\", -1)\n    //this.onWalk(main)\n  },\n});"]}